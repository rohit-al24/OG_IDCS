{% extends 'base.html' %}
{% load static %}

{% block head %}
<meta name="viewport" content="width=device-width, initial-scale=1">
{% endblock %}

{% block mobile_header %}{% endblock %}

{% block root %}
<div class="container-fluid mt-4">
    <div class="od-table">
        <div class="od-table-header" style="display:flex;justify-content:space-between;align-items:center;">
            <span class="header-title">Student Certificates</span>
            <a href="{% url 'dash' %}" class="home-icon d-block d-md-none" style="color:white;">
                <i class="fa fa-home" aria-hidden="true" aria-label="Home"></i>
            </a>
        </div>
        <hr class="od-divider">
        <style>
            .od-table { width:100%; margin-top:8px; background:#fff; box-shadow:0 6px 18px rgba(15,23,42,0.06); border-radius:8px; overflow-x:auto; }
            .od-table-header { display:flex; align-items:center; justify-content:space-between; padding:10px 14px; background:#1976d2; color:#fff; font-weight:600; border-top-left-radius:8px; border-top-right-radius:8px; }
            .od-divider { margin:0; border:0; height:2px; background:linear-gradient(to right,#e0e7ff,#e0e0e0); }
            .od-table table { width:100%; border-collapse:collapse; table-layout: fixed; margin:0; }
            .od-table thead th { background:#f5f7fa; color:#2c3e50; font-weight:600; padding:10px; text-align:center; border-bottom:1px solid #e6eef6; }
            .od-table tbody tr { transition:background 0.12s ease; }
            .od-table tbody tr:nth-child(even) { background:#fbfdff; }
            .od-table tbody tr:hover { background:#f1f5f9; }
            .od-table td, .od-table th { padding:8px; border:1px solid #e8f0f6; vertical-align:middle; text-overflow:ellipsis; overflow:hidden; white-space:nowrap; text-align:center; }
            .od-table a { color:#1565c0; }
            @media (max-width:768px) {
                .od-table { padding:8px; }
                .od-table table { display:block; width:100%; }
                .od-table thead { display:none; }
                .od-table tbody { display:block; width:100%; padding:0; margin:0; }
                .od-table tbody tr { display:block; width:100%; border:1px solid #e6eef6; margin:0 0 8px 0; border-radius:6px; padding:8px; background:#fff; box-sizing:border-box; }
                .od-table td { display:block; padding:6px 0; border:none; border-bottom:1px solid #f1f5f9; white-space:normal; box-sizing:border-box; font-size:0.95rem; }
                .od-table td::before { content: attr(data-label); display:block; font-weight:600; color:#555; margin-bottom:6px; }
                .od-table td:last-child { border-bottom:none; }
                .od-table a { word-break:break-all; }
            }
        </style>

        <table class="table table-bordered table-sm mb-0">
            <thead>
                <tr>
                    <th>Student</th>
                    <th>File</th>
                    <th>Subject</th>
                    <th>Uploaded At</th>
                </tr>
            </thead>
            <tbody>
                {% for cert in certificates %}
                <tr>
                    <td data-label="Student">{{ cert.student.name }} ({{ cert.student.user.username }})</td>
                    <td data-label="File"><a href="{{ cert.file.url }}" target="_blank">{{ cert.file.name|slice:'12:' }}</a></td>
                    <td data-label="Subject">{% if cert.subject %}{{ cert.subject }}{% else %}-{% endif %}</td>
                    <td data-label="Uploaded At">{{ cert.uploaded_at|date:"d M Y H:i" }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="4">No certificates uploaded by your students yet.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
